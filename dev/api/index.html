<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · RANSAC.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">RANSAC.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../example/">Example</a></li><li><a class="tocitem" href="../ransac/">Efficient RANSAC</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Representing-a-point-cloud-1"><span>Representing a point cloud</span></a></li><li><a class="tocitem" href="#Parameters-1"><span>Parameters</span></a></li><li><a class="tocitem" href="#Primitives-1"><span>Primitives</span></a></li><li><a class="tocitem" href="#Iteration-1"><span>Iteration</span></a></li><li><a class="tocitem" href="#Exporting-the-results-1"><span>Exporting the results</span></a></li></ul></li><li><a class="tocitem" href="../newprimitive/">New primitive</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/cserteGT3/RANSAC.jl/blob/master/docs/src/api.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Public-API-1"><a class="docs-heading-anchor" href="#Public-API-1">Public API</a><a class="docs-heading-anchor-permalink" href="#Public-API-1" title="Permalink"></a></h1><p>Note, that not all exported functions are considered as part of the public API. The private API is not mature yet, expect it to change.</p><h2 id="Representing-a-point-cloud-1"><a class="docs-heading-anchor" href="#Representing-a-point-cloud-1">Representing a point cloud</a><a class="docs-heading-anchor-permalink" href="#Representing-a-point-cloud-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="RANSAC.RANSACCloud" href="#RANSAC.RANSACCloud"><code>RANSAC.RANSACCloud</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">struct RANSACCloud{A&lt;:AbstractArray, B&lt;:AbstractArray, C&lt;:AbstractArray}</code></pre><p>A struct to wrap a point cloud. Stores the vertices, the normals,     the octree of the vertices,     the subsets (as an array of arrays of vertice indexes),     an array to indicate if a point is part of an already extracted primitive,     the size of the point cloud (number of vertices),     the weight of each octree level (populated during the construction of the octree,     by copying the given element),     an array to store the sum of the score of already     extracted primitives for each octree level.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/octree.jl#L24-L36">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RANSAC.RANSACCloud-Tuple{Any,Any,Int64}" href="#RANSAC.RANSACCloud-Tuple{Any,Any,Int64}"><code>RANSAC.RANSACCloud</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">RANSACCloud(vertices, normals, numofsubsets::Int)</code></pre><p>Construct a <code>RANSACCloud</code> with <code>numofsubsets</code> number of random subsets.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/octree.jl#L85-L89">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RANSAC.RANSACCloud-Tuple{Any,Any,Any}" href="#RANSAC.RANSACCloud-Tuple{Any,Any,Any}"><code>RANSAC.RANSACCloud</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">RANSACCloud(vertices, normals, subsets)</code></pre><p>Construct a <code>RANSACCloud</code> with the given <code>subsets</code>. Converts vertices and normals to array of <code>SVector{3,Float64}</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/octree.jl#L67-L72">source</a></section></article><h2 id="Parameters-1"><a class="docs-heading-anchor" href="#Parameters-1">Parameters</a><a class="docs-heading-anchor-permalink" href="#Parameters-1" title="Permalink"></a></h2><p>For parameters nested named tuples are used, because it&#39;s easy to construct them, change their values or extend them. Earlier Parameters.jl was used, but I could not solve the extension part, then came the named tuples. You can construct it by hand, use the exported <code>ransacparameters()</code> function or load from a YAML file.</p><h3 id="Structure-of-the-parameters-1"><a class="docs-heading-anchor" href="#Structure-of-the-parameters-1">Structure of the parameters</a><a class="docs-heading-anchor-permalink" href="#Structure-of-the-parameters-1" title="Permalink"></a></h3><p>The easiest way to construct the desired named tuple is to use the <code>ransacparameters()</code> function.</p><article class="docstring"><header><a class="docstring-binding" id="RANSAC.ransacparameters" href="#RANSAC.ransacparameters"><code>RANSAC.ransacparameters</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">ransacparameters(p::T=DEFAULT_PARAMETERS; kwargs...) where {T&lt;:NamedTuple}</code></pre><p>Construct a <code>NamedTuple</code> based on a previous one, defaulting to <code>DEFAULT_PARAMETERS</code> and override it with the kwargs. Check the docs and examples for more.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; p1 = ransacparameters()
(iteration = (drawN = 3, minsubsetN = 15, prob_det = 0.9),
plane = (ϵ = 0.3, α = 0.08726646259971647),
cone = (ϵ = 0.3, α = 0.08726646259971647, minconeopang = 0.03490658503988659),
cylinder = (ϵ = 0.3, α = 0.08726646259971647),
sphere = (ϵ = 0.3, α = 0.08726646259971647, sphere_par = 0.1))

julia&gt; p2 = ransacparameters(p1; sphere=(ϵ=0.9, α=deg2rad(1),), plane=(ϵ=1.0,))
(iteration = (drawN = 3, minsubsetN = 15, prob_det = 0.9),
plane = (ϵ = 1.0, α = 0.08726646259971647),
cone = (ϵ = 0.3, α = 0.08726646259971647, minconeopang = 0.03490658503988659),
cylinder = (ϵ = 0.3, α = 0.08726646259971647),
sphere = (ϵ = 0.9, α = 0.017453292519943295, sphere_par = 0.1))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/utilities.jl#L401-L424">source</a></section><section><div><pre><code class="language-none">ransacparameters(p::Array{T}; kwargs...) where {T&lt;:UnionAll}</code></pre><p>Construct a <code>NamedTuple</code> for a given types of shapes  using <a href="#RANSAC.defaultparameters"><code>defaultparameters</code></a> and override it with the kwargs. Check the docs and examples for more.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; p1 = ransacparameters([FittedSphere, FittedCylinder])
(iteration = (drawN = 3, minsubsetN = 15, prob_det = 0.9,
shape_types = UnionAll[FittedSphere, FittedCylinder], τ = 900, itermax = 1000,
extract_s = :nofminset, terminate_s = :nofminset),
common = (collin_threshold = 0.2, parallelthrdeg = 1.0),
sphere = (ϵ = 0.3, α = 0.08726646259971647, sphere_par = 0.02),
cylinder = (ϵ = 0.3, α = 0.08726646259971647))

julia&gt; p2 = ransacparameters([FittedSphere, FittedCylinder], sphere=(ϵ=0.01,), cylinder=(α=0.02,))
(iteration = (drawN = 3, minsubsetN = 15, prob_det = 0.9,
shape_types = UnionAll[FittedSphere, FittedCylinder], τ = 900, itermax = 1000,
extract_s = :nofminset, terminate_s = :nofminset),
common = (collin_threshold = 0.2, parallelthrdeg = 1.0),
sphere = (ϵ = 0.01, α = 0.08726646259971647, sphere_par = 0.02),
cylinder = (ϵ = 0.3, α = 0.02))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/utilities.jl#L435-L460">source</a></section></article><p>As the docstring shows, you can construct a new one based on an old one, and give keyword arguments that will overwrite the old values. Note, that the key-values that are in the keyword arguments will be overwritten, not the named tuple itself (so the values not listed in the keyword argument will not change).</p><p>As you can see in the above examples, the parameter must have two fields:<code>iteration</code>, <code>common</code> and the primitive types that you want to fit (<code>sphere</code>, <code>plane</code>, etc.). Note, that <code>p.iteration.shape_types</code> field controls which primitives are fitted. Another important thing regarding the <code>ransacparameter()</code> function, that the keyword named tuple must have a trailing comma, so this is good:</p><pre><code class="language-julia">p2 = ransacparameters([FittedSphere, FittedCylinder], sphere=(ϵ=0.01,))</code></pre><p>, but the following is NOT:</p><pre><code class="language-julia">p2 = ransacparameters([FittedSphere, FittedCylinder], sphere=(ϵ=0.01))</code></pre><p>The <code>ransacparameters()</code> function uses the not exported <code>default...parameters()</code> function, whose docstrings describes which parameters control what:</p><article class="docstring"><header><a class="docstring-binding" id="RANSAC.defaultcommonparameters" href="#RANSAC.defaultcommonparameters"><code>RANSAC.defaultcommonparameters</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">defaultcommonparameters()</code></pre><p>Construct a <code>NamedTuple</code> with the default common parameters.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; defaultcommonparameters()
(common = (collin_threshold = 0.2, parallelthrdeg = 1.0),)</code></pre><p><strong>Implementation</strong></p><p>This section describes the role of the common parameters.</p><ul><li><code>collin_threshold</code>: 3 points can be nearly collinear,   in some cases they must be filtered. See the code of:   <code>fit(::Type{FittedPlane}, p, n, params)</code>.</li><li><code>parallelthrdeg</code>: threshold for two vectos being parallel, in degrees.   If <code>abs(dot(a,b))&gt;cosd(parallelthrdeg)</code>, <code>a</code> and <code>b</code> are considered to be parallel.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/utilities.jl#L349-L367">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RANSAC.defaultiterationparameters" href="#RANSAC.defaultiterationparameters"><code>RANSAC.defaultiterationparameters</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">defaultiterationparameters(shape_types)</code></pre><p>Construct a named tuple with the default iteration parameters. <code>shape_types</code> is an array of <code>FittedShape</code>s, that controls which primitives you want to fit to the point cloud.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; RANSAC.defaultiterationparameters([FittedPlane])
(iteration = (drawN = 3, minsubsetN = 15, prob_det = 0.9,
shape_types = UnionAll[FittedPlane], τ = 900, itermax = 1000,
extract_s = :nofminset, terminate_s = :nofminset),)

julia&gt; RANSAC.defaultiterationparameters([FittedPlane, FittedSphere, FittedCone])
(iteration = (drawN = 3, minsubsetN = 15, prob_det = 0.9,
shape_types = UnionAll[FittedPlane, FittedSphere, FittedCone], τ = 900, itermax = 1000,
extract_s = :nofminset, terminate_s = :nofminset),)</code></pre><p><strong>Implementation</strong></p><ul><li><code>drawN</code>: number of points to be sampled (length of a minimal subset).</li><li><code>minsubsetN</code>: number of minimal sets sampled in one iteration.</li><li><code>prob_det</code>: probability of detection.</li><li><code>τ</code>: minimal shape size.</li><li><code>itermax</code>: maximum number of iteration.</li><li><code>shape_types</code>: shapes that are fitted to the point cloud (array of types).</li><li><code>extract_s</code>, <code>terminate_s</code>: they are for easier testing, do not delete or modify it.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/utilities.jl#L302-L331">source</a></section></article><p>Check <a href="../newprimitive/#RANSAC.defaultshapeparameters"><code>RANSAC.defaultshapeparameters</code></a> as well.</p><p>The <code>defaultparameters</code> function joins these together:</p><article class="docstring"><header><a class="docstring-binding" id="RANSAC.defaultparameters" href="#RANSAC.defaultparameters"><code>RANSAC.defaultparameters</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">defaultparameters(shape_types::Vector{T}) where {T}</code></pre><p>Construct a <code>NamedTuple</code> with the given shape types and the default parameters.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; defaultparameters([FittedSphere, FittedPlane])
(iteration = (drawN = 3, minsubsetN = 15, prob_det = 0.9,
shape_types = UnionAll[FittedSphere, FittedPlane], τ = 900, itermax = 1000,
extract_s = :nofminset, terminate_s = :nofminset),
common = (collin_threshold = 0.2, parallelthrdeg = 1.0),
sphere = (ϵ = 0.3, α = 0.08726646259971647, sphere_par = 0.02),
plane = (ϵ = 0.3, α = 0.08726646259971647))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/utilities.jl#L375-L390">source</a></section></article><h3 id="Construct-by-hand-1"><a class="docs-heading-anchor" href="#Construct-by-hand-1">Construct by hand</a><a class="docs-heading-anchor-permalink" href="#Construct-by-hand-1" title="Permalink"></a></h3><p>As parameters are plain named tuples, one can easily construct their own. The above functions make heavy use of the <code>merge</code> function. Check the code, if you wish.</p><h3 id="Parse-from-YAML-file-1"><a class="docs-heading-anchor" href="#Parse-from-YAML-file-1">Parse from YAML file</a><a class="docs-heading-anchor-permalink" href="#Parse-from-YAML-file-1" title="Permalink"></a></h3><p>With the help of <a href="https://github.com/BioJulia/YAML.jl">YAML.jl</a> one can easily read the parameters from a YAML file. As shown below, you can specify which parameters you want to change (the others are going to be the default ones).</p><p>An example file (<code>config.yml</code>):</p><pre><code class="language-yml">plane:
  - ϵ: 0.1
  - α: 0.01

sphere:
  - ϵ: 0.2
  - α: 0.05
  # parameter in sphere fitting
  - sphere_par: 0.01

cone:
  - ϵ: 1.
  - α: 3.14
  # filter those cones, whose opening angle is less than `minconeopang` radians
  - minconeopang: 1.

iteration:
  # number of points to be sampled (length of a minimal subset)
  - drawN: 9
  # number of minimal sets sampled in one iteration
  - minsubsetN: 2
  # probability of detection
  - prob_det: 0.999
  # minimal shape size
  - τ: 10000
  # maximum number of iteration
  - itermax: 100000
  # shapes that are fitted to the point cloud
  - shape_types:
    - plane
    - sphere
    - cone

common:
  # threshold of two vectors being parallel (in degrees)
  - parallelthrdeg: 0.5
  # threshold of points being collinear
  - collin_threshold: 0.3</code></pre><p>Then you can use the <code>readconfig</code> function to read the file:</p><pre><code class="language-julia">julia&gt; readconfig(&quot;config.yml&quot;)
(iteration = (drawN = 9, minsubsetN = 2, prob_det = 0.999,
shape_types = UnionAll[FittedPlane, FittedSphere, FittedCone], τ = 10000,
itermax = 100000, extract_s = :nofminset, terminate_s = :nofminset),
common = (collin_threshold = 0.3, parallelthrdeg = 0.5),
plane = (ϵ = 0.1, α = 0.01), cone = (ϵ = 1.0, α = 3.14, minconeopang = 1.0),
cylinder = (ϵ = 0.3, α = 0.08726646259971647),
sphere = (ϵ = 0.2, α = 0.05, sphere_par = 0.01))</code></pre><article class="docstring"><header><a class="docstring-binding" id="RANSAC.readconfig" href="#RANSAC.readconfig"><code>RANSAC.readconfig</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">readconfig(fname; toextend=DEFAULT_PARAMETERS, shapedict=DEFAULT_SHAPE_DICT)</code></pre><p>Read a config file to a <code>NamedTuple</code>. A &quot;base&quot; ntuple is expected, that gets overwritten/extended with the values in the config file. A <code>Dict{String,FittedShape}</code> dictionary is also expected, that translates the string primitive types to julia types.</p><p><strong>Arguments</strong></p><ul><li><code>fname</code>: name of the config file.</li><li><code>toextend=DEFAULT_PARAMETERS</code>: a named tuple,   that will be overwritten/extended with the values from the config file.</li><li><code>shapedict=DEFAULT_SHAPE_DICT</code>: a dictionary that   translates the string primitive names to julia types.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/json-yaml.jl#L64-L80">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RANSAC.DEFAULT_PARAMETERS" href="#RANSAC.DEFAULT_PARAMETERS"><code>RANSAC.DEFAULT_PARAMETERS</code></a> — <span class="docstring-category">Constant</span></header><section><div><p><code>const DEFAULT_PARAMETERS =      defaultparameters([FittedPlane, FittedCone, FittedCylinder, FittedSphere])</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/RANSAC.jl#L83-L86">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RANSAC.DEFAULT_SHAPE_DICT" href="#RANSAC.DEFAULT_SHAPE_DICT"><code>RANSAC.DEFAULT_SHAPE_DICT</code></a> — <span class="docstring-category">Constant</span></header><section><div><p><code>const DEFAULT_SHAPE_DICT = Dict(&quot;plane&quot;=&gt;FittedPlane,     &quot;cone&quot;=&gt;FittedCone, &quot;cylinder&quot;=&gt;FittedCylinder, &quot;sphere&quot;=&gt;FittedSphere)</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/RANSAC.jl#L89-L92">source</a></section></article><h2 id="Primitives-1"><a class="docs-heading-anchor" href="#Primitives-1">Primitives</a><a class="docs-heading-anchor-permalink" href="#Primitives-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="RANSAC.FittedShape" href="#RANSAC.FittedShape"><code>RANSAC.FittedShape</code></a> — <span class="docstring-category">Type</span></header><section><div><p>An abstract type that supertypes all the fitted shapes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/fitting.jl#L3-L5">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RANSAC.FittedPlane" href="#RANSAC.FittedPlane"><code>RANSAC.FittedPlane</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">struct FittedPlane{A&lt;:AbstractArray} &lt;: FittedShape</code></pre><p>Plane primitive, defined by one of its point, and its normalvector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/shapes/plane.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RANSAC.FittedSphere" href="#RANSAC.FittedSphere"><code>RANSAC.FittedSphere</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">struct FittedSphere{A&lt;:AbstractArray, R&lt;:Real} &lt;: FittedShape</code></pre><p>Sphere primitive, defined by its center and radius. Also stored, if the normals point outwards of the shape.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/shapes/sphere.jl#L3-L8">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RANSAC.FittedCylinder" href="#RANSAC.FittedCylinder"><code>RANSAC.FittedCylinder</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">struct FittedCylinder{A&lt;:AbstractArray, R&lt;:Real} &lt;: FittedShape</code></pre><p>Cylinder primitive, defined by its axis direction, a point that lies on its axis, and its radius. Also stored, if the normals point outwards of the shape.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/shapes/cylinder.jl#L3-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RANSAC.FittedCone" href="#RANSAC.FittedCone"><code>RANSAC.FittedCone</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">struct FittedCone{A&lt;:AbstractArray, R&lt;:Real} &lt;: FittedShape</code></pre><p>Cone primitive, defined by its apex, its axis (that points from the apex towards the opening), and its opening angle in radians. Also stored, if the normals point outwards of the shape.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/shapes/cone.jl#L3-L10">source</a></section></article><h2 id="Iteration-1"><a class="docs-heading-anchor" href="#Iteration-1">Iteration</a><a class="docs-heading-anchor-permalink" href="#Iteration-1" title="Permalink"></a></h2><p>The <code>ransac()</code> function does the iteration.</p><article class="docstring"><header><a class="docstring-binding" id="RANSAC.ransac" href="#RANSAC.ransac"><code>RANSAC.ransac</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">ransac(pc, params, setenabled; reset_rand = false)</code></pre><p>Run the RANSAC algorithm on a pointcloud with the given parameters.</p><p>Return the extracted primitives and the time it took to run the algorithm (in seconds).</p><p><strong>Arguments</strong></p><ul><li><code>pc::RANSACCloud</code>: the point cloud.</li><li><code>params::NamedTuple</code>: parameters.</li><li><code>setenabled::Bool</code>: if <code>true</code>: set every point to enabled.</li><li><code>reset_rand::Bool=false</code>: if <code>true</code>, resets the random seed with <code>Random.seed!(1234)</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/iterations.jl#L1-L13">source</a></section><section><div><pre><code class="language-none">ransac(pc, params; reset_rand = false)</code></pre><p>Run the RANSAC algorithm on a pointcloud with the given parameters.</p><p>Return the extracted primitives and the time it took to run the algorithm (in seconds).</p><p><strong>Arguments</strong></p><ul><li><code>pc::RANSACCloud</code>: the point cloud.</li><li><code>params::NamedTuple</code>: parameters.</li><li><code>reset_rand::Bool=false</code>: if <code>true</code>, resets the random seed with <code>Random.seed!(1234)</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/iterations.jl#L23-L34">source</a></section></article><p>The iteration returns an array of <code>ExtractedShape</code>:</p><article class="docstring"><header><a class="docstring-binding" id="RANSAC.ExtractedShape" href="#RANSAC.ExtractedShape"><code>RANSAC.ExtractedShape</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">ExtractedShape{S&lt;:FittedShape}</code></pre><p>Store an extraced primitive (<code>FittedShape</code>) and the points that belong to the shape as <code>Vector{Int}</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/fitting.jl#L68-L73">source</a></section></article><h2 id="Exporting-the-results-1"><a class="docs-heading-anchor" href="#Exporting-the-results-1">Exporting the results</a><a class="docs-heading-anchor-permalink" href="#Exporting-the-results-1" title="Permalink"></a></h2><p>With the help of <a href="https://github.com/JuliaIO/JSON.jl">JSON.jl</a>, the resulted shapes can be easily saved to JSON files. For this purpose, the <code>exportJSON()</code> function can be used. Note that <code>io</code> must be specified, the &quot;default&quot; fallback to <code>stdout</code> is not implemented.</p><article class="docstring"><header><a class="docstring-binding" id="RANSAC.exportJSON" href="#RANSAC.exportJSON"><code>RANSAC.exportJSON</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">printJSON(io::IO, s, indent)</code></pre><p>Print a <code>FittedShape</code>, <code>ExtractedShape</code> or a vector of them to <code>io</code> as a JSON string. With <code>indent</code> given, it prints a representation with newlines and indents.</p><p><strong>Arguments:</strong></p><ul><li><code>io::IO</code>: must be specified, use <code>stdout</code> for interactive purposes.</li><li><code>s</code>: a <code>FittedShape</code>, <code>ExtractedShape</code> or a vector of one of them.</li><li><code>indent::Int</code>: indentation level.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/json-yaml.jl#L32-L42">source</a></section><section><div><pre><code class="language-none">printJSON(io::IO, s)</code></pre><p>Print a <code>FittedShape</code>, <code>ExtractedShape</code> or a vector of them to <code>io</code> as a compact JSON string.</p><p><strong>Arguments:</strong></p><ul><li><code>io::IO</code>: must be specified, use <code>stdout</code> for interactive purposes.</li><li><code>s</code>: a <code>FittedShape</code>, <code>ExtractedShape</code> or a vector of one of them.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/json-yaml.jl#L47-L56">source</a></section></article><p>A few examples:</p><pre><code class="language-julia">julia&gt; using RANSAC, StaticArrays

julia&gt; s1 = FittedPlane(SVector(0,0,1.), SVector(12.5, 7, 24))
FittedPlane{SArray{Tuple{3},Float64,1,3}}
normal: [12.5, 7.0, 24.0], point: [0.0, 0.0, 1.0]

julia&gt; exportJSON(stdout, s1)
{&quot;point&quot;:[0.0,0.0,1.0],&quot;normal&quot;:[12.5,7.0,24.0],&quot;type&quot;:&quot;plane&quot;}

julia&gt; exportJSON(stdout, s1, 2)
{
  &quot;point&quot;: [
    0.0,
    0.0,
    1.0
  ],
  &quot;normal&quot;: [
    12.5,
    7.0,
    24.0
  ],
  &quot;type&quot;: &quot;plane&quot;
}</code></pre><p>It is advised to export shapes in an array for easier processing (though I&#39;m not a JSON expert):</p><pre><code class="language-julia">julia&gt; exportJSON(stdout, [s1])
{&quot;primitives&quot;:[{&quot;point&quot;:[0.0,0.0,1.0],&quot;normal&quot;:[12.5,7.0,24.0],&quot;type&quot;:&quot;plane&quot;}]}

julia&gt; exportJSON(stdout, [s1], 2)
{
  &quot;primitives&quot;: [
    {
      &quot;point&quot;: [
        0.0,
        0.0,
        1.0
      ],
      &quot;normal&quot;: [
        12.5,
        7.0,
        24.0
      ],
      &quot;type&quot;: &quot;plane&quot;
    }
  ]
}</code></pre><p>Works of course for different primitives:</p><pre><code class="language-julia">julia&gt; s2 = FittedSphere(SVector(1.2, 3., 5.), 1.5, true)
FittedSphere{SArray{Tuple{3},Float64,1,3}, Float64}
center: [1.2, 3.0, 5.0], R: 1.5, outwards

julia&gt; exportJSON(stdout, [s1, s2], 2)
{
  &quot;primitives&quot;: [
    {
      &quot;point&quot;: [
        0.0,
        0.0,
        1.0
      ],
      &quot;normal&quot;: [
        12.5,
        7.0,
        24.0
      ],
      &quot;type&quot;: &quot;plane&quot;
    },
    {
      &quot;outwards&quot;: true,
      &quot;radius&quot;: 1.5,
      &quot;center&quot;: [
        1.2,
        3.0,
        5.0
      ],
      &quot;type&quot;: &quot;sphere&quot;
    }
  ]
}</code></pre><p>As can be seen above, in these cases an array of <code>&quot;primitives&quot;</code> is printed. Under the hood, the <code>toDict()</code> function does the job of converting the primitives to <code>Dict</code>s.</p><article class="docstring"><header><a class="docstring-binding" id="RANSAC.toDict-Tuple{FittedShape}" href="#RANSAC.toDict-Tuple{FittedShape}"><code>RANSAC.toDict</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">toDict(s::FittedShape)</code></pre><p>Convert <code>s</code> to a <code>Dict{String,Any}</code>. It&#39;s &quot;type&quot; is defined by <a href="../newprimitive/#RANSAC.strt"><code>strt</code></a>. All fields of the struct is saved to the dict.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/json-yaml.jl#L3-L8">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RANSAC.toDict-Union{Tuple{Array{T,1}}, Tuple{T}} where T&lt;:Union{FittedShape, ExtractedShape}" href="#RANSAC.toDict-Union{Tuple{Array{T,1}}, Tuple{T}} where T&lt;:Union{FittedShape, ExtractedShape}"><code>RANSAC.toDict</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">toDict(a::Vector{T}) where {T&lt;:Union{FittedShape,ExtractedShape}}</code></pre><p>Convert a vector of shapes to a <code>Dict{String,Any}</code>. The top key is a &quot;primitive&quot;, whose value is the array of the shapes. See the documentation for examples.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cserteGT3/RANSAC.jl/blob/d6f21aa42583c4e4c87514f9231a273bb5c4186d/src/json-yaml.jl#L20-L26">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../ransac/">« Efficient RANSAC</a><a class="docs-footer-nextpage" href="../newprimitive/">New primitive »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 29 May 2020 08:34">Friday 29 May 2020</span>. Using Julia version 1.0.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
